<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Coverband: <%= Coverband::VERSION %></title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='<%= assets_path('application.js') %>' type='text/javascript'></script>
    <link href='<%= assets_path('application.css') %>' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="<%= assets_path("favicon_#{coverage_css_class(result.source_files.covered_percent)}.png") %>" />
    <link rel="icon" type="image/png" href="<%= assets_path('favicon.png') %>" />
  </head>

  <body>
    <div id="loading">
      <img src="<%= assets_path('loading.gif') %>" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div id="header">
        <a href='<%= base_path %>'>Coverband Admin</a> &nbsp;
        <%= button("#{base_path}collect_coverage", 'force coverage collection') %> &nbsp;
        <%= button("#{base_path}reload_files", 'reload Coverband files') %> &nbsp;
        <% if Coverband.configuration.web_enable_clear %>
          <%= button("#{base_path}clear", 'clear coverage report', delete: true) %>
        <% end %>
      </div>
      <% if notice.to_s.length > 0 %>
      <div class="notice"><%= notice %></div>
      <% end %>
      <div class="timestamp">Generated <%= timeago(Time.now) %></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <%= formatted_file_list("All Files", result.source_files) unless view_gems? %>

        <% result.groups.each do |name, files| %>
          <%= formatted_file_list(name, files) %>
        <% end %>
      </div>

      <div id="footer">
        Generated by <a href="http://github.com/danmayer/coverband">Coverband</a> v<%= Coverband::VERSION %>
      </div>

      <div class="source_files">
      <% result.source_files.each do |source_file| %>
        <%= formatted_source_file(source_file) %>
      <% end %>
      </div>
    </div>
  </body>
</html>
